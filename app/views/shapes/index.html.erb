<div class="container" style="height: 100vh;" >
  <h1 class="font-bold text-4xl">Imóveis Rurais</h1>


  <div class="border mt-8" id="map" style="height: 80%;"></div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var map = L.map('map').setView([0, 0], 2);

      var osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      var geojson = <%= raw @geojson.to_json %>;
      function onEachFeature(feature, layer) {
        if (feature.properties) {
          var popupContent =
            "<p><strong>Propriedade:</strong> " + feature.properties.name + "</p>" +
            "<p><strong>Código Incra:</strong> " + feature.properties.ccir + "</p>" +
            "<p><strong>Registro:</strong> " + feature.properties.register + "</p>";
          layer.bindPopup(popupContent);
        }
      }

      var geojsonLayer = L.geoJSON(geojson, {
        onEachFeature: onEachFeature
      }).addTo(map);

      // Ajusta o mapa para caber todos os shapes
      if (geojsonLayer.getBounds().isValid()) {
        map.fitBounds(geojsonLayer.getBounds());
      }
    });
  </script>
</div>
